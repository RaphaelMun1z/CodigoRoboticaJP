#include <Servo.h>

Servo servoDirecao;

int anguloCentro = 90;
int anguloEsquerda = 0;
int anguloDireita = 180;

// Pinos Motor A
int pinVelocidadeMotorA = 3;
int pinDirecaoMotorA1 = 4;
int pinDirecaoMotorA2 = 5;

// Pinos Motor B
int pinDirecaoMotorB1 = 6;
int pinDirecaoMotorB2 = 7;
int pinVelocidadeMotorB = 11;

void setup() {
  servoDirecao.attach(9);

  pinMode(pinVelocidadeMotorA, OUTPUT);
  pinMode(pinDirecaoMotorA1, OUTPUT);
  pinMode(pinDirecaoMotorA2, OUTPUT);

  pinMode(pinVelocidadeMotorB, OUTPUT);
  pinMode(pinDirecaoMotorB1, OUTPUT);
  pinMode(pinDirecaoMotorB2, OUTPUT);

  centralizar();
}

void loop() {
  centralizar();
  frente(200, 2000);

  parar(500);

  virarEsquerda();
  frente(150, 1000);

  parar(500);

  virarDireita();
  tras(150, 1000);

  centralizar();
  parar(2000);
}

void centralizar() {
  servoDirecao.write(anguloCentro);
  delay(150);
}

void virarEsquerda() {
  servoDirecao.write(anguloEsquerda);
  delay(150);
}

void virarDireita() {
  servoDirecao.write(anguloDireita);
  delay(150);
}

void frente(int velocidade, int tempo) {
  digitalWrite(pinDirecaoMotorA1, HIGH);
  digitalWrite(pinDirecaoMotorA2, LOW);
  digitalWrite(pinDirecaoMotorB1, HIGH);
  digitalWrite(pinDirecaoMotorB2, LOW);

  analogWrite(pinVelocidadeMotorA, velocidade);
  analogWrite(pinVelocidadeMotorB, velocidade);

  delay(tempo);
}

void tras(int velocidade, int tempo) {
  digitalWrite(pinDirecaoMotorA1, LOW);
  digitalWrite(pinDirecaoMotorA2, HIGH);
  digitalWrite(pinDirecaoMotorB1, LOW);
  digitalWrite(pinDirecaoMotorB2, HIGH);

  analogWrite(pinVelocidadeMotorA, velocidade);
  analogWrite(pinVelocidadeMotorB, velocidade);

  delay(tempo);
}

void parar(int tempo) {
  digitalWrite(pinDirecaoMotorA1, LOW);
  digitalWrite(pinDirecaoMotorA2, LOW);
  digitalWrite(pinDirecaoMotorB1, LOW);
  digitalWrite(pinDirecaoMotorB2, LOW);

  analogWrite(pinVelocidadeMotorA, 0);
  analogWrite(pinVelocidadeMotorB, 0);

  delay(tempo);
}
